sudo: required
language: python

branches:
  only:
    # This is where pull requests from "bors r+" are built.
    - staging
    # This is where pull requests from "bors try" are built.
    - trying
    # Build pull requests.
    - master

install:
  - pip install whaledo

services:
  - docker

env:
  global:
    - MAKEFLAGS="-j 2"
  matrix:
    - TEST_SECTION=general
    - TEST_SECTION=panic
    - TEST_SECTION=lint

script:
  - "./bin/make clean test-${TEST_SECTION}"

notifications:
  email:
    on_success: change # default: change
    on_failure: change # default: always
